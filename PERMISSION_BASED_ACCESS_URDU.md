# ุตุงุฑู ฺฉ ุงุฌุงุฒุชูฺบ ฺฉ ุจูุงุฏ ูพุฑ ุตูุญุงุช ุชฺฉ ุฑุณุงุฆ - ุงุฑุฏู ฺฏุงุฆฺ

## ๐ ุฎูุงุต

ุงุณ ูุธุงู ูฺบ ุตุงุฑู ฺฉ ุงุฌุงุฒุชูฺบ (Permissions) ฺฉ ุจูุงุฏ ูพุฑ ุฎูุฏฺฉุงุฑ ุทูุฑ ูพุฑ ุตุญุญ ุตูุญุงุช ฺฉฺพูุช ฺบ

---

## ๐ฏ ุงุฌุงุฒุช ฺฉ ุงูุณุงู

### 1๏ธโฃ Call Tickets (ูนฺฉูน ฺฉุงู ฺฉุฑูุง)
**ุงุฌุงุฒุช:** `canCallTickets: true`

**ฺฉุง ฺฉุฑ ุณฺฉุช ฺบ:**
- โ Dashboard ุตูุญ ฺฉฺพู ุณฺฉุชุง 
- โ ูุฆ ูนฺฉูน ฺฉุงู ฺฉุฑ ุณฺฉุช ฺบ
- โ Pending ูนฺฉูนุณ ุฏฺฉฺพ ุณฺฉุช ฺบ
- โ ูนฺฉูน ููุชูู (Transfer) ฺฉุฑ ุณฺฉุช ฺบ

**ฺฉุง ูฺบ ฺฉุฑ ุณฺฉุช:**
- โ Completed Tasks ุตูุญ ูฺบ ฺฉฺพู ุณฺฉุชุง

---

### 2๏ธโฃ Completed Task (ูฺฉูู ุดุฏ ฺฉุงู)
**ุงุฌุงุฒุช:** `canCreateTickets: true`

**ฺฉุง ฺฉุฑ ุณฺฉุช ฺบ:**
- โ Completed Tasks ุตูุญ ฺฉฺพู ุณฺฉุชุง 
- โ ุงูพู ูฺฉูู ฺฉ ูุฆ ูนฺฉูนุณ ุฏฺฉฺพ ุณฺฉุช ฺบ
- โ ุชุงุฑุฎ ฺฉ ุญุณุงุจ ุณ ูููนุฑ ฺฉุฑ ุณฺฉุช ฺบ
- โ ูนฺฉูน ฺฉ ุชูุตูุงุช ุฏฺฉฺพ ุณฺฉุช ฺบ

**ฺฉุง ูฺบ ฺฉุฑ ุณฺฉุช:**
- โ Dashboard ุตูุญ ูฺบ ฺฉฺพู ุณฺฉุชุง
- โ ูุฆ ูนฺฉูน ฺฉุงู ูฺบ ฺฉุฑ ุณฺฉุช

---

## ๐ ฺฉุณ ฺฉุงู ฺฉุฑุชุง ุ

### ูุฑุญู 1: ุตุงุฑู ูุงฺฏ ุงู ฺฉุฑุชุง 
```
ุตุงุฑู ูุงฺฏ ุงู ฺฉุฑุชุง  โ Database ุณ ุงุฌุงุฒุชฺบ ฺฺฉ ูุช ฺบ โ Token ูฺบ ูุญููุธ ูุช ฺบ
```

### ูุฑุญู 2: ุตูุญ ฺฉฺพููู ฺฉ ฺฉูุดุด
```
ุตูุญ ฺฉฺพููุง โ ุงุฌุงุฒุช ฺฺฉ ูุช  โ ุงฺฏุฑ  ุชู ฺฉฺพู ฺฏุงุ ูุฑู ุฏูุณุฑ ุตูุญ ูพุฑ ุจฺพุฌ ุฏุง ุฌุงุฆ ฺฏุง
```

### ูุฑุญู 3: API ฺฉุงู
```
API ฺฉุงู โ Backend ูพุฑ ุงุฌุงุฒุช ุฏูุจุงุฑ ฺฺฉ โ ุงฺฏุฑ ูฺบ ุชู Error
```

---

## ๐ฅ ูุฎุชูู ุตุงุฑูู ฺฉ ูุซุงูฺบ

### ุตุงุฑู #1: ุตุฑู Call Tickets ฺฉ ุงุฌุงุฒุช
```json
{
  "canCallTickets": true,
  "canCreateTickets": false
}
```

**ูุชุฌ:**
- `/user/dashboard` ฺฉฺพู ุฌุงุฆ ฺฏุง โ
- `/user/completed-tasks` ูฺบ ฺฉฺพู ฺฏุง โ
- ุงฺฏุฑ completed tasks ฺฉฺพููู ฺฉ ฺฉูุดุด ฺฉุฑ ุชู dashboard ูพุฑ ูุงูพุณ ุจฺพุฌ ุฏุง ุฌุงุฆ ฺฏุง

**ุงุณุชุนูุงู:**
 ุตุงุฑู ุตุฑู ูนฺฉูน ฺฉุงู ฺฉุฑู ฺฉ ู  ุฌุณ ฺฉุงุคููนุฑ ูพุฑ ุจูนฺพุง ูุง ุดุฎุต

---

### ุตุงุฑู #2: ุตุฑู Completed Task ฺฉ ุงุฌุงุฒุช
```json
{
  "canCallTickets": false,
  "canCreateTickets": true
}
```

**ูุชุฌ:**
- `/user/dashboard` ูฺบ ฺฉฺพู ฺฏุง โ
- `/user/completed-tasks` ฺฉฺพู ุฌุงุฆ ฺฏุง โ
- ุงฺฏุฑ dashboard ฺฉฺพููู ฺฉ ฺฉูุดุด ฺฉุฑ ุชู completed tasks ูพุฑ ุจฺพุฌ ุฏุง ุฌุงุฆ ฺฏุง

**ุงุณุชุนูุงู:**
 ุตุงุฑู ุตุฑู ุงูพู ูฺฉูู ฺฉ ูุฆ ฺฉุงู ุฏฺฉฺพู ฺฉ ู 

---

### ุตุงุฑู #3: ุฏูููฺบ ุงุฌุงุฒุชฺบ
```json
{
  "canCallTickets": true,
  "canCreateTickets": true
}
```

**ูุชุฌ:**
- `/user/dashboard` ฺฉฺพู ุณฺฉุชุง  โ
- `/user/completed-tasks` ฺฉฺพู ุณฺฉุชุง  โ
- ุฏูููฺบ ุตูุญุงุช ุขุฒุงุฏุงู ุงุณุชุนูุงู ฺฉุฑ ุณฺฉุชุง 

**ุงุณุชุนูุงู:**
ูฺฉูู ุฑุณุงุฆ ูุงูุง ุตุงุฑู

---

### ุตุงุฑู #4: ฺฉูุฆ ุงุฌุงุฒุช ูฺบ
```json
{
  "canCallTickets": false,
  "canCreateTickets": false
}
```

**ูุชุฌ:**
- ฺฉูุฆ ุตูุญ ูฺบ ฺฉฺพู ุณฺฉุชุง โ
- Login ุตูุญ ูพุฑ ูุงูพุณ ุจฺพุฌ ุฏุง ุฌุงุฆ ฺฏุง

**ุงุณุชุนูุงู:**
ุบุฑ ูุนุงู ุตุงุฑู ุง ูุง ุตุงุฑู ุฌุณ ุงุจฺพ ุงุฌุงุฒุชฺบ ูฺบ ุฏ ฺฏุฆฺบ

---

## ๐๏ธ Admin ฺฉ ู - ุงุฌุงุฒุชฺบ ฺฉุณ ุฏฺบ

### ุทุฑู 1: User Management ุณ

1. Admin ูฺบ ูุงฺฏ ุงู ฺฉุฑฺบ
2. **User Management** ูฺบ ุฌุงุฆฺบ
3. ุตุงุฑู ุชูุงุด ฺฉุฑฺบ
4. **Edit** ุจูนู ุฏุจุงุฆฺบ
5. Permissions ูฺบ ููุงุณุจ checkboxes ฺฉู tick ฺฉุฑฺบ:
   - โ๏ธ **Call Tickets** - Dashboard ฺฉ ุฑุณุงุฆ
   - โ๏ธ **Completed Task** - Completed Tasks ฺฉ ุฑุณุงุฆ
6. **Update User** ุฏุจุงุฆฺบ

### ุทุฑู 2: Database ุณ (ุชฺฉูฺฉ)

```sql
-- ุตุงุฑู ฺฉู Call Tickets ฺฉ ุงุฌุงุฒุช ุฏฺบ
UPDATE users 
SET permissions = JSON_OBJECT(
  'canCallTickets', true,
  'canCreateTickets', false
)
WHERE username = 'user123';

-- ุตุงุฑู ฺฉู Completed Tasks ฺฉ ุงุฌุงุฒุช ุฏฺบ
UPDATE users 
SET permissions = JSON_OBJECT(
  'canCallTickets', false,
  'canCreateTickets', true
)
WHERE username = 'user456';

-- ุฏูููฺบ ุงุฌุงุฒุชฺบ ุฏฺบ
UPDATE users 
SET permissions = JSON_OBJECT(
  'canCallTickets', true,
  'canCreateTickets', true
)
WHERE username = 'user789';
```

---

## ๐งช ุฌุงูฺ ฺฉุณ ฺฉุฑฺบ

### ุฌุงูฺ #1: Call Tickets ูุงูุง ุตุงุฑู

1. ุงฺฉ ูุง ุตุงุฑู ุจูุงุฆฺบ
2. ุตุฑู "Call Tickets" ฺฉู tick ฺฉุฑฺบ
3. ูุงฺฏ ุขุคูน ฺฉุฑฺบ ุงูุฑ ุงุณ ุตุงุฑู ุณ ูุงฺฏ ุงู ฺฉุฑฺบ
4. Dashboard ฺฉฺพููุง ฺุง โ
5. Browser ูฺบ `/user/completed-tasks` ูฺฉฺพ ฺฉุฑ ุฏฺฉฺพฺบ
6. Dashboard ูพุฑ ูุงูพุณ ุขูุง ฺุง ุงูุฑ ูพุบุงู ุขูุง ฺุง โ

### ุฌุงูฺ #2: Completed Tasks ูุงูุง ุตุงุฑู

1. ุงฺฉ ูุง ุตุงุฑู ุจูุงุฆฺบ
2. ุตุฑู "Completed Task" ฺฉู tick ฺฉุฑฺบ
3. ูุงฺฏ ุขุคูน ฺฉุฑฺบ ุงูุฑ ุงุณ ุตุงุฑู ุณ ูุงฺฏ ุงู ฺฉุฑฺบ
4. Completed Tasks ุตูุญ ฺฉฺพููุง ฺุง โ
5. Browser ูฺบ `/user/dashboard` ูฺฉฺพ ฺฉุฑ ุฏฺฉฺพฺบ
6. Completed Tasks ูพุฑ ูุงูพุณ ุขูุง ฺุง ุงูุฑ ูพุบุงู ุขูุง ฺุง โ

### ุฌุงูฺ #3: ุฏูููฺบ ุงุฌุงุฒุชูฺบ ูุงูุง ุตุงุฑู

1. ุงฺฉ ูุง ุตุงุฑู ุจูุงุฆฺบ
2. "Call Tickets" ุงูุฑ "Completed Task" ุฏูููฺบ tick ฺฉุฑฺบ
3. ูุงฺฏ ุขุคูน ฺฉุฑฺบ ุงูุฑ ุงุณ ุตุงุฑู ุณ ูุงฺฏ ุงู ฺฉุฑฺบ
4. Dashboard ฺฉฺพููุง ฺุง โ
5. Completed Tasks ฺฉฺพููฺบ - ฺฉฺพููุง ฺุง โ
6. ุฏูููฺบ ุตูุญุงุช ุขุฒุงุฏุงู ุงุณุชุนูุงู ฺฉุฑ ุณฺฉุช ฺบ

---

## ๐ ูุณุงุฆู ุงูุฑ ุญู

### ูุณุฆู #1: ุงุฌุงุฒุช  ูฺฉู ูพฺพุฑ ุจฺพ ูฺบ ฺฉฺพู ุฑุง

**ุญู:**
1. Browser ฺฉุง Console ฺฉฺพููฺบ (F12 ุฏุจุงุฆฺบ)
2. ุฏฺฉฺพฺบ ฺฉุง ุงุฌุงุฒุชฺบ ุตุญุญ ุฏฺฉฺพุงุฆ ุฏ ุฑ ฺบ
3. ูุงฺฏ ุขุคูน ฺฉุฑ ฺฉ ุฏูุจุงุฑ ูุงฺฏ ุงู ฺฉุฑฺบ
4. Browser ฺฉุง Cache ุตุงู ฺฉุฑฺบ

**Console ูฺบ  ุฏฺฉฺพฺบ:**
```
โ User has canCallTickets permission
```
ุง
```
โ User has canCreateTickets permission
```

### ูุณุฆู #2: ุจุงุฑ ุจุงุฑ Login ุตูุญ ูพุฑ ุจฺพุฌ ุฑุง 

**ุญู:**
1. ุตุงุฑู ฺฉู ฺฉู ุงุฒ ฺฉู ุงฺฉ ุงุฌุงุฒุช ุถุฑูุฑ ุฏฺบ
2. Database ูฺบ `permissions` column ฺฺฉ ฺฉุฑฺบ
3. ุตุงุฑู ฺฉ `status` = `active` ูู ฺุง

### ูุณุฆู #3: Admin Panel ุณ ุงุฌุงุฒุช ุฏ ูฺฉู ฺฉุงู ูฺบ ฺฉุฑ ุฑ

**ุญู:**
1. ุตุงุฑู ฺฉู ูุงฺฏ ุขุคูน ฺฉุฑ ฺฉ ุฏูุจุงุฑ ูุงฺฏ ุงู ฺฉุฑูุง ูพฺ ฺฏุง
2. Token ูฺบ ูพุฑุงู ุงุฌุงุฒุชฺบ ูุช ฺบ
3. ูุง ูุงฺฏ ุงู ูุฆ ุงุฌุงุฒุชฺบ ู ฺฏุง

---

## ๐ Console Logs ุณูุฌฺพฺบ

### ุตุญุญ ฺฉุงู ฺฉุฑ ุฑุง :
```
โ User has canCallTickets permission
๐ฆ Separated tickets: Regular=5, Transferred=2
๐ No ticket selected, setting to: T001
```

### ุงุฌุงุฒุช ูฺบ :
```
โ๏ธ User does not have canCallTickets permission - redirecting
โ Permission denied - redirecting to completed tasks
```

### API Error:
```
โ Error fetching tickets: Request failed with status code 403
Error details: { missing_permission: 'canCallTickets' }
```

---

## โก ุงู ูฺฉุงุช

1. **Admin/Super Admin:** ุชูุงู ุงุฌุงุฒุชฺบ ุฎูุฏฺฉุงุฑ ุทูุฑ ูพุฑ ููุช ฺบ
2. **ุฏูุฑ ุฌุงูฺ:** Frontend ุงูุฑ Backend ุฏูููฺบ ูพุฑ ฺฺฉ ูุชุง 
3. **ุฎูุฏฺฉุงุฑ ููุชูู:** ุบูุท ุตูุญ ูพุฑ ุฌุงู ูพุฑ ุฎูุฏฺฉุงุฑ ุทูุฑ ูพุฑ ุตุญุญ ุตูุญ ูพุฑ ุจฺพุฌ ุฏุง ุฌุงุชุง 
4. **ูพุบุงู:** ุฑ ุบูุท ฺฉูุดุด ูพุฑ ูุงุถุญ ูพุบุงู ุขุชุง 
5. **ูุญููุธ:** Backend ูพุฑ ุฑ API ฺฉุงู ฺฺฉ ูุช 

---

## โ ฺฺฉ ูุณูน

Admin ฺฉ ู:
- [ ] ุตุงุฑู ุจูุงุง
- [ ] ููุงุณุจ ุงุฌุงุฒุชฺบ ุฏฺบ
- [ ] ุตุงุฑู ฺฉุง Status = Active
- [ ] ุตุงุฑู ฺฉู ูุงฺฏ ุงู ฺฉุฑุงุง
- [ ] ุตุญุญ ุตูุญ ฺฉฺพู ุฑุง 
- [ ] ุบูุท ุตูุญ ูพุฑ ุฌุงู ฺฉ ฺฉูุดุด ฺฉ
- [ ] ุตุญุญ ุทุฑู ุณ ุฏูุณุฑ ุตูุญ ูพุฑ ููุชูู ู ุฑุง 

ุตุงุฑู ฺฉ ู:
- [ ] ูุงฺฏ ุงู ฺฉุง
- [ ] ุงูพูุง ุตูุญ ฺฉฺพู ฺฏุง
- [ ] ฺฉุงู ฺฉุฑ ุณฺฉุช ฺบ
- [ ] ุฏูุณุฑ ุตูุญ ูพุฑ ูฺบ ุฌุง ุณฺฉุช (ุงฺฏุฑ ุงุฌุงุฒุช ูฺบ)

---

## ๐ ูุซุงู ฺฉ ุตูุฑุชุญุงู

### ุณูุงุฑู: ุจูฺฉ ฺฉุง ฺฉุงุคููนุฑ

**Counter Person (ฺฉุงุคููนุฑ ูพุฑ ุจูนฺพุง ุดุฎุต):**
- ุงุฌุงุฒุช: `canCallTickets: true`
- ฺฉุงู: ูุฆ ฺฏุงฺฉูฺบ ฺฉู ฺฉุงู ฺฉุฑูุง
- ุตูุญ: Dashboard

**Supervisor (ูฺฏุฑุงู):**
- ุงุฌุงุฒุช: `canCreateTickets: true`
- ฺฉุงู: ุขุฌ ฺฉ ูฺฉูู ฺฉ ูุฆ ฺฉุงู ุฏฺฉฺพูุง
- ุตูุญ: Completed Tasks

**Manager (ููุฌุฑ):**
- ุงุฌุงุฒุชฺบ: ุฏูููฺบ `true`
- ฺฉุงู: ุณุจ ฺฉฺฺพ ุฏฺฉฺพูุง ุงูุฑ ฺฉููนุฑูู ฺฉุฑูุง
- ุตูุญุงุช: ุฏูููฺบ

---

**ูุธุงู ูฺฉูู ุทูุฑ ูพุฑ ุชุงุฑ ! โจ**

ุงุจ ุฑ ุตุงุฑู ฺฉู ุตุฑู ู ุฏฺฉฺพุงุฆ ุฏ ฺฏุง ุฌุณ ฺฉ ุงุณ ุงุฌุงุฒุช 
