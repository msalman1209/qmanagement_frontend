# 🎙️ ChatterBox AI Voice - اردو گائیڈ

## ✅ مکمل شدہ کام

### 1. کنفیگریشن صفحہ (صرف AI)
**فائل:** `src/app/[role]/configuration/page.js`

**تبدیلیاں:**
- ✅ براؤزر Speech Synthesis مکمل طور پر ہٹا دیا گیا
- ✅ اب صرف ChatterBox AI استعمال ہوگا
- ✅ آسان انٹرفیس صرف AI کنٹرولز کے ساتھ
- ✅ سیٹنگز خودکار طور پر محفوظ ہوتی ہیں
- ✅ سروس کی حیثیت (آن لائن/آف لائن) دکھائی دیتی ہے

**خصوصیات:**
- 🎤 آواز کی سیمپل اپ لوڈ کریں (voice cloning کے لیے)
- 🔊 اپ لوڈ شدہ آوازوں میں سے منتخب کریں
- 🌍 زبان منتخب کریں (انگریزی، اردو، ہندی وغیرہ)
- ⚡ بولنے کی رفتار (0.5x - 2.0x)
- 🎵 آواز کی pitch (0.5 - 2.0)
- 🧪 ٹیسٹ آواز بٹن
- 💾 سیٹنگز محفوظ کریں بٹن

### 2. ٹکٹ انفو صفحہ (AI آواز انٹیگریشن)
**فائل:** `src/app/ticket_info/page.js`

**تبدیلیاں:**
- ✅ براؤزر speechSynthesis کو ChatterBox AI سے بدل دیا
- ✅ ایڈمن کی محفوظ شدہ سیٹنگز استعمال کرتا ہے
- ✅ نئے ٹکٹ کے لیے خودکار AI اعلان
- ✅ سروس ہیلتھ چیک
- ✅ آڈیو پلے بیک کے ساتھ error handling

**کیسے کام کرتا ہے:**
1. صفحہ لوڈ → ChatterBox AI سروس چیک کرتا ہے
2. نیا ٹکٹ کال ہوا → ایڈمن کی سیٹنگز لوڈ کرتا ہے
3. `/api/voices/synthesize` کو ٹکٹ ٹیکسٹ کے ساتھ کال کرتا ہے
4. AI آواز خودکار طور پر بجاتا ہے
5. BroadcastChannel استعمال کرتا ہے تمام ٹیبز میں اپ ڈیٹ کے لیے

---

## 🚀 تمام سروسز کیسے شروع کریں

### مرحلہ 1: ChatterBox AI Python سروس
```powershell
cd python-tts-service
python app.py
```
**دیکھنا چاہیے:** `Running on http://127.0.0.1:5001`

### مرحلہ 2: Node.js Backend
```powershell
cd backend
node server.js
```
**دیکھنا چاہیے:** `Server running on port 5000`

### مرحلہ 3: Next.js Frontend
```powershell
npm run dev
```
**دیکھنا چاہیے:** `Ready - started server on http://localhost:3000`

---

## ⚙️ کنفیگریشن کا طریقہ

### ایڈمن سیٹ اپ (ایک بار)
1. **Configuration** صفحہ پر جائیں
2. **ChatterBox AI Voice System** کی حیثیت چیک کریں (سبز "Online" ہونا چاہیے)
3. **Upload Voice Sample** (اختیاری - voice cloning کے لیے)
   - سپورٹڈ: WAV, MP3, OGG, M4A
   - زیادہ سے زیادہ سائز: 10MB
4. ڈراپ ڈاؤن سے **آواز منتخب کریں**
   - 🔊 System voices (ڈیفالٹ)
   - 📁 اپ لوڈ شدہ آوازیں
   - 🎙️ Cloned آوازیں
5. **زبان منتخب کریں** (انگریزی، اردو، ہندی وغیرہ)
6. **بولنے کی رفتار ایڈجسٹ کریں** (0.5x - 2.0x)
7. **Pitch ایڈجسٹ کریں** (0.5 - 2.0)
8. **🔊 Test AI Voice** پر کلک کر کے دیکھیں
9. **💾 Save Settings** کلک کریں - سیٹنگز ہمیشہ محفوظ رہیں گی!

### خودکار ٹکٹ اعلانات
جب سیٹنگز محفوظ ہو جائیں:
- ڈیش بورڈ آپریٹر ٹکٹ کال کرتا ہے
- Ticket Info صفحہ خودکار طور پر:
  1. نیا ٹکٹ detect کرتا ہے
  2. ایڈمن کی سیٹنگز لوڈ کرتا ہے
  3. ChatterBox سے AI آواز بناتا ہے
  4. اعلان بجاتا ہے

**مزید کوئی سیٹنگز کی ضرورت نہیں!** سیٹنگز ہر جگہ لاگو ہوں گی۔

---

## 📝 سیٹنگز کیسے محفوظ ہوتی ہیں

سیٹنگز **localStorage** میں `tts_settings` کے نام سے محفوظ ہوتی ہیں:

```json
{
  "selectedChatterboxVoice": "uploaded_voice_123.wav",
  "speechRate": 0.9,
  "speechPitch": 1.0,
  "preferredLanguage": "ur",
  "useAI": true
}
```

**اہم نکات:**
- ✅ صفحہ refresh کرنے کے بعد بھی محفوظ رہتی ہیں
- ✅ Configuration اور Ticket Info دونوں صفحات میں استعمال ہوتی ہیں
- ✅ `useAI: true` flag AI-only mode ensure کرتا ہے
- ✅ Voice ID اپ لوڈ شدہ samples کا حوالہ دیتا ہے

---

## 🎤 آواز کی اقسام

### 1. **System Voices** (🔊)
- بلٹ ان ڈیفالٹ آوازیں
- فوری طور پر دستیاب
- اپ لوڈ کی ضرورت نہیں

### 2. **Uploaded Voices** (📁)
- ایڈمن آڈیو سیمپل اپ لوڈ کرتا ہے
- `backend/uploads/voices/` میں محفوظ ہوتی ہیں
- synthesis کے لیے reference کے طور پر استعمال

### 3. **Cloned Voices** (🎙️)
- اپ لوڈ شدہ samples سے AI generated
- ChatterBox model استعمال کرتا ہے cloning کے لیے
- بہتر کوالٹی، زیادہ قدرتی

---

## 🔧 مسائل کا حل

### ChatterBox سروس آف لائن
**علامات:** Configuration صفحہ پر سرخ "Offline" حیثیت

**حل:**
1. Python سروس شروع کریں: `cd python-tts-service && python app.py`
2. Models ڈاؤن لوڈ چیک کریں: `models/` فولڈر (~3GB)
3. Port 5001 خالی ہے: `netstat -ano | findstr :5001`

### آڈیو نہیں بج رہا
**علامات:** اعلان نہیں بجتا

**حل:**
1. براؤزر console میں errors چیک کریں
2. Backend port 5000 پر چل رہا ہے verify کریں
3. Synthesis endpoint ٹیسٹ کریں: `http://localhost:5000/api/voices/health`
4. آڈیو فائلیں accessible ہیں: `http://localhost:5001/audio/filename.mp3`

### سیٹنگز محفوظ نہیں ہو رہیں
**علامات:** ٹیسٹ کام کرتا ہے لیکن اعلانات غلط سیٹنگز استعمال کرتے ہیں

**حل:**
1. Configuration میں **💾 Save Settings** بٹن کلک کریں
2. براؤزر DevTools میں localStorage چیک کریں
3. سیٹنگز محفوظ کرنے کے بعد Ticket Info صفحہ refresh کریں

### آواز اپ لوڈ فیل
**علامات:** "Only audio files allowed" error

**حل:**
1. سپورٹڈ فارمیٹس استعمال کریں: WAV, MP3, OGG, M4A
2. فائل سائز < 10MB چیک کریں
3. Backend multer کے ساتھ چل رہا ہے ensure کریں

---

## 🌐 زبانوں کی سپورٹ

Configuration dropdown میں موجودہ زبانیں:
- English (en)
- اردو (ur)
- Hindi (hi)
- Arabic (ar)
- Spanish (es)
- French (fr)
- German (de)
- Chinese (zh)
- Japanese (ja)

**نوٹ:** gTTS 100+ زبانیں سپورٹ کرتا ہے۔ ضرورت کے مطابق dropdown میں مزید شامل کریں!

---

## 📊 مکمل فلو

```
┌──────────────────────────────────────────────┐
│ 1. ایڈمن آواز کی سیٹنگز کرتا ہے              │
│    - آواز کی سیمپل اپ لوڈ کریں               │
│    - آواز، زبان، رفتار، pitch منتخب کریں    │
│    - ٹیسٹ اور سیٹنگز محفوظ کریں              │
└──────────────────────────────────────────────┘
                    ↓
┌──────────────────────────────────────────────┐
│ 2. آپریٹر ڈیش بورڈ سے ٹکٹ کال کرتا ہے      │
│    - ڈیٹا بیس میں ٹکٹ "called" mark ہوتا ہے│
│    - called_at timestamp اپ ڈیٹ ہوتا ہے      │
└──────────────────────────────────────────────┘
                    ↓
┌──────────────────────────────────────────────┐
│ 3. Ticket Info صفحہ backend poll کرتا ہے     │
│    - تازہ ترین called tickets fetch کرتا ہے  │
│    - timestamp سے نیا ٹکٹ detect کرتا ہے     │
└──────────────────────────────────────────────┘
                    ↓
┌──────────────────────────────────────────────┐
│ 4. BroadcastChannel نوٹیفکیشن               │
│    - تمام کھلے ٹیبز کو اطلاع ملتی ہے        │
│    - Real-time sync                         │
└──────────────────────────────────────────────┘
                    ↓
┌──────────────────────────────────────────────┐
│ 5. AI آواز کا اعلان trigger ہوتا ہے         │
│    - localStorage سے سیٹنگز لوڈ              │
│    - اعلان کا متن بناتا ہے                   │
│    - ChatterBox synthesis API کال کرتا ہے   │
└──────────────────────────────────────────────┘
                    ↓
┌──────────────────────────────────────────────┐
│ 6. ChatterBox آڈیو بناتا ہے                  │
│    - Python سروس speech synthesize کرتی ہے  │
│    - ایڈمن کی آواز کی سیٹنگز استعمال کرتا ہے│
│    - آڈیو فائل URL واپس بھیجتا ہے            │
└──────────────────────────────────────────────┘
                    ↓
┌──────────────────────────────────────────────┐
│ 7. براؤزر میں آڈیو بجتا ہے                   │
│    - Audio object بناتا ہے                   │
│    - اعلان خودکار طور پر بجتا ہے             │
│    - سکرین پر ٹکٹ نمبر دکھاتا ہے            │
└──────────────────────────────────────────────┘
```

---

## ✨ مکمل شدہ خصوصیات

- [x] ChatterBox AI انٹیگریشن (gTTS + pyttsx3)
- [x] آواز اپ لوڈ اور cloning سسٹم
- [x] صرف AI کے ساتھ Configuration صفحہ
- [x] localStorage میں سیٹنگز محفوظ
- [x] خودکار ٹکٹ اعلانات
- [x] کئی زبانوں کی سپورٹ
- [x] رفتار اور pitch کنٹرول
- [x] سروس health monitoring
- [x] Cross-tab communication
- [x] آڈیو فائل generation اور serving

---

## 🎉 کامیابی کی چیک لسٹ

لائیو ہونے سے پہلے چیک کریں:

1. **Python Service**
   - [ ] Port 5001 پر چل رہی ہے
   - [ ] Models فولڈر موجود ہے (~3GB)
   - [ ] Health endpoint respond کرتا ہے

2. **Backend Service**
   - [ ] Port 5000 پر چل رہی ہے
   - [ ] Voice routes registered ہیں
   - [ ] Uploads فولڈر بنا ہوا ہے

3. **Frontend**
   - [ ] Port 3000 پر چل رہا ہے
   - [ ] Configuration صفحہ بغیر errors لوڈ ہوتا ہے
   - [ ] Ticket Info صفحہ بغیر errors لوڈ ہوتا ہے

4. **Configuration**
   - [ ] ChatterBox حیثیت "Online" دکھاتی ہے
   - [ ] آواز کی samples اپ لوڈ ہو سکتی ہیں
   - [ ] Test voice بٹن کام کرتا ہے
   - [ ] سیٹنگز کامیابی سے محفوظ ہوتی ہیں

5. **اعلانات**
   - [ ] Dashboard سے ٹکٹ کال کریں
   - [ ] Ticket Info صفحہ نیا ٹکٹ دکھاتا ہے
   - [ ] AI آواز خودکار طور پر بولتی ہے
   - [ ] صحیح آواز کی سیٹنگز لاگو ہوتی ہیں

---

## 🎊 مبارک ہو!

آپ کے queue management سسٹم میں اب ہے:
- ✅ پروفیشنل AI آواز کے اعلانات
- ✅ Customizable آواز کی سیٹنگز
- ✅ کئی زبانوں کی سپورٹ
- ✅ Voice cloning صلاحیت
- ✅ Real-time ٹکٹ نوٹیفکیشنز

**سب کچھ configured اور استعمال کے لیے تیار ہے!** 🚀
